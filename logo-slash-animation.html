<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ゼゼヒヒ - 斬撃ロゴアニメーション</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght=900&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            font-family: 'Zen Kaku Gothic New', sans-serif;
        }

        .logo-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #logoSVG {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.3));
        }

        /* SVG内のテキストスタイル */
        .logo-text {
            font-family: 'Zen Kaku Gothic New', sans-serif;
            font-weight: 900;
            font-size: 120px;
            fill: #ffffff;
            user-select: none;
        }

        /* 斬撃ライン */
        .slash-line {
            stroke: #ffffff;
            stroke-width: 4;
            stroke-linecap: round;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8))
                    drop-shadow(0 0 20px rgba(255, 255, 255, 0.6))
                    drop-shadow(0 0 30px rgba(255, 255, 255, 0.4));
        }

        /* 切断パーツのスタイル */
        .hihi-part {
            transform-origin: center center;
        }

        /* デバッグ情報（オプション） */
        .debug-info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            font-family: monospace;
            display: none; /* 必要に応じてblockに変更 */
        }
    </style>
</head>
<body>
    <div class="logo-container">
        <svg id="logoSVG" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
            <!-- クリッピングパス定義 -->
            <defs>
                <!-- 上半分のクリッピングパス（斜めの切断ライン上部） -->
                <clipPath id="clipTop">
                    <polygon points="0,0 800,0 800,200 0,50" />
                </clipPath>

                <!-- 下半分のクリッピングパス（斜めの切断ライン下部） -->
                <clipPath id="clipBottom">
                    <polygon points="0,50 800,200 800,300 0,300" />
                </clipPath>
            </defs>

            <!-- 「ゼゼ」部分（アニメーションなし） -->
            <text class="logo-text zeze-text" x="50" y="180">ゼゼ</text>

            <!-- 「ヒヒ」部分 - 上半分 -->
            <g id="hihiTop" class="hihi-part" clip-path="url(#clipTop)">
                <text class="logo-text" x="350" y="180">ヒヒ</text>
            </g>

            <!-- 「ヒヒ」部分 - 下半分 -->
            <g id="hihiBottom" class="hihi-part" clip-path="url(#clipBottom)">
                <text class="logo-text" x="350" y="180">ヒヒ</text>
            </g>

            <!-- 斬撃ライン -->
            <line id="slashLine" class="slash-line"
                  x1="250" y1="-50"
                  x2="250" y2="-50"
                  opacity="0"/>
        </svg>
    </div>

    <div class="debug-info" id="debugInfo">
        Animation: Ready
    </div>

    <!-- GSAP Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

    <script>
        // ===========================================
        // グローバル変数とDOM要素の取得
        // ===========================================
        const hihiTop = document.getElementById('hihiTop');
        const hihiBottom = document.getElementById('hihiBottom');
        const slashLine = document.getElementById('slashLine');
        const debugInfo = document.getElementById('debugInfo');

        // ===========================================
        // デバッグ用関数（オプション）
        // ===========================================
        function debug(message) {
            if (debugInfo) {
                debugInfo.textContent = message;
                console.log(message);
            }
        }

        // ===========================================
        // メインアニメーション - GSAPタイムライン
        // ===========================================
        function createSlashAnimation() {
            // マスタータイムライン（無限ループ）
            const masterTimeline = gsap.timeline({
                repeat: -1,
                repeatDelay: 2,
                onStart: () => debug('Animation: Started'),
                onRepeat: () => debug('Animation: Loop')
            });

            // ==========================================
            // シーケンス1: 斬撃（Slash）
            // ==========================================
            masterTimeline.to(slashLine, {
                duration: 0.15,
                opacity: 1,
                x2: 650,  // 左上から右下への斬撃
                y2: 350,
                ease: 'power4.out',
                onStart: () => {
                    // 斬撃音を追加する場合はここで再生
                    debug('Slash: Executing');
                }
            }, 0);

            // 斬撃ラインのフェードアウト
            masterTimeline.to(slashLine, {
                duration: 0.1,
                opacity: 0,
                ease: 'power2.out'
            }, 0.15);

            // ==========================================
            // シーケンス2: 切断と落下（Split & Drop）
            // ==========================================

            // 上半分の落下アニメーション
            masterTimeline.to(hihiTop, {
                duration: 1.2,
                y: 400,              // 下方向に落下
                x: -80,              // 少し左にずれる
                rotation: -35,       // 反時計回りに回転
                opacity: 0.3,        // 徐々に薄くなる
                ease: 'power2.in',   // 重力を感じる加速
                onStart: () => debug('Drop: Top part falling')
            }, 0.2);  // 斬撃直後に開始

            // 下半分の落下アニメーション
            masterTimeline.to(hihiBottom, {
                duration: 1.3,
                y: 450,              // より下方向に落下
                x: 60,               // 少し右にずれる
                rotation: 25,        // 時計回りに回転
                opacity: 0.2,        // 徐々に薄くなる
                ease: 'power2.in',   // 重力を感じる加速
                onStart: () => debug('Drop: Bottom part falling')
            }, 0.25);  // 上半分より少し遅れて開始

            // ==========================================
            // シーケンス3: 復元（Restore）
            // ==========================================

            // 少しの待機時間
            masterTimeline.to({}, { duration: 0.5 });

            // 上半分の復元
            masterTimeline.to(hihiTop, {
                duration: 0.8,
                y: 0,
                x: 0,
                rotation: 0,
                opacity: 1,
                ease: 'back.out(1.7)',  // 磁石で吸い寄せられる効果
                onStart: () => debug('Restore: Reassembling')
            }, '+=0');

            // 下半分の復元
            masterTimeline.to(hihiBottom, {
                duration: 0.8,
                y: 0,
                x: 0,
                rotation: 0,
                opacity: 1,
                ease: 'back.out(1.7)',  // 磁石で吸い寄せられる効果
            }, '<');  // 上半分と同時に開始

            // 斬撃ラインを初期位置にリセット
            masterTimeline.set(slashLine, {
                x2: 250,
                y2: -50,
                opacity: 0
            });

            return masterTimeline;
        }

        // ===========================================
        // パフォーマンス最適化設定
        // ===========================================
        gsap.config({
            force3D: true,  // GPU アクセラレーションを強制
        });

        // SVGのレンダリング品質設定
        gsap.set([hihiTop, hihiBottom], {
            transformOrigin: 'center center',
            force3D: true
        });

        // ===========================================
        // アニメーション実行
        // ===========================================
        // ページロード時に少し待ってから開始
        window.addEventListener('load', () => {
            setTimeout(() => {
                const animation = createSlashAnimation();
                debug('Animation: Ready to play');
                animation.play();
            }, 500);
        });

        // ===========================================
        // レスポンシブ対応（オプション）
        // ===========================================
        window.addEventListener('resize', () => {
            // 必要に応じてSVGのビューポートを調整
            debug('Window: Resized');
        });

        // ===========================================
        // クリックでアニメーションを手動再生（デバッグ用）
        // ===========================================
        document.querySelector('.logo-container').addEventListener('click', () => {
            // タイムラインを最初から再生
            gsap.globalTimeline.clear();
            createSlashAnimation().play();
            debug('Animation: Manual restart');
        });
    </script>
</body>
</html>